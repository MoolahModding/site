<!DOCTYPE html>
<html>
  <head>
    <style>
      window, html, body {
        border: 0;
        margin: 0;
        padding: 0;
      }
      body {
        overflow: scroll;
      }
      #minimap-container {
        position: fixed;
        top: 5vmin;
        right: 5vmin;

        outline: 2px solid black;
      }
      #minimap {
        max-width: 30vmin;
        max-height: 30vmin;

        display: block;

        pointer-events: none;
      }
      #minimap-view {
        position: absolute;
        box-sizing: border-box;
        left: 0%;
        top: 50%;

        pointer-events: none;

        outline: 2px solid black;
      }
      #map {
        transform-origin: top left;
      }
      #container {
        overflow: hidden;
      }
    </style>
  </head>
  <body>
    <div id="container"></div>
    <div id="minimap-container">
      <img id="minimap"></img>
      <div id="minimap-view"></div>
    </div>
    <script type="text/javascript">
      const container = document.getElementById('container');
      const minimap = document.getElementById('minimap');
      const minimapView = document.getElementById('minimap-view');
      const minimapContainer = document.getElementById('minimap-container');

      const data = new TextDecoder().decode(Uint8Array.from(atob("PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+DQo8IURPQ1RZUEUgc3ZnIFBVQkxJQyAiLS8vVzNDLy9EVEQgU1ZHIDEuMS8vRU4iDQogImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+DQo8IS0tIEdlbmVyYXRlZCBieSBncmFwaHZpeiB2ZXJzaW9uIDExLjAuMCAoMjAyNDA0MjguMTUyMikNCiAtLT4NCjwhLS0gUGFnZXM6IDEgLS0+DQo8c3ZnIHdpZHRoPSIyMTM4cHQiIGhlaWdodD0iODgycHQiDQogdmlld0JveD0iMC4wMCAwLjAwIDIxMzcuNTAgODgxLjc1IiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIj4NCjxnIGlkPSJncmFwaDAiIGNsYXNzPSJncmFwaCIgdHJhbnNmb3JtPSJzY2FsZSgxIDEpIHJvdGF0ZSgwKSB0cmFuc2xhdGUoNCA4NzcuNzUpIj4NCjxwb2x5Z29uIGZpbGw9IndoaXRlIiBzdHJva2U9Im5vbmUiIHBvaW50cz0iLTQsNCAtNCwtODc3Ljc1IDIxMzMuNSwtODc3Ljc1IDIxMzMuNSw0IC00LDQiLz4NCjwhLS0gV0JQX1VJX0hVRF9BeGlzSW5wdXRfQyAtLT4NCjxnIGlkPSJub2RlMSIgY2xhc3M9Im5vZGUiPg0KPHRpdGxlPldCUF9VSV9IVURfQXhpc0lucHV0X0M8L3RpdGxlPg0KPHBvbHlnb24gZmlsbD0iIzg4ZmY4OCIgc3Ryb2tlPSJibGFjayIgcG9pbnRzPSIwLC03ODYuNSAwLC04NzMuMjUgNTExLC04NzMuMjUgNTExLC03ODYuNSAwLC03ODYuNSIvPg0KPHRleHQgdGV4dC1hbmNob3I9InN0YXJ0IiB4PSI4IiB5PSItODU1Ljk1IiBmb250LWZhbWlseT0ibW9ub3NwYWNlIiBmb250LXNpemU9IjE0LjAwIj5DbGFzc0V4cG9ydDogV0JQX1VJX0hVRF9BeGlzSW5wdXRfQzwvdGV4dD4NCjx0ZXh0IHRleHQtYW5jaG9yPSJzdGFydCIgeD0iOCIgeT0iLTg0MC4yIiBmb250LWZhbWlseT0ibW9ub3NwYWNlIiBmb250LXNpemU9IjE0LjAwIj7ilJzilJDilJzilJBTdXBlclN0cnVjdDogaW1wb3J0IC9TY3JpcHQvU3RhcmJyZWV6ZSYjNDU7Jmd0O1NCWkF4aXNJbnB1dFdpZGdldDwvdGV4dD4NCjx0ZXh0IHRleHQtYW5jaG9yPSJzdGFydCIgeD0iOCIgeT0iLTgyNC40NSIgZm9udC1mYW1pbHk9Im1vbm9zcGFjZSIgZm9udC1zaXplPSIxNC4wMCI+4pSc4pSQ4pSc4pSQUHJvcGVydGllczo8L3RleHQ+DQo8dGV4dCB0ZXh0LWFuY2hvcj0ic3RhcnQiIHg9IjgiIHk9Ii04MDguNyIgZm9udC1mYW1pbHk9Im1vbm9zcGFjZSIgZm9udC1zaXplPSIxNC4wMCI+4pSc4pSQ4pSc4pSQ4pSc4pSQ4pSc4pSQU3RydWN0UHJvcGVydHkgVWJlckdyYXBoRnJhbWU8L3RleHQ+DQo8dGV4dCB0ZXh0LWFuY2hvcj0ic3RhcnQiIHg9IjgiIHk9Ii03OTIuOTUiIGZvbnQtZmFtaWx5PSJtb25vc3BhY2UiIGZvbnQtc2l6ZT0iMTQuMDAiPuKUnOKUkOKUnOKUkOKUnOKUkOKUnOKUkOKUnOKUkOKUnOKUkENQRl9UcmFuc2llbnR8Q1BGX0R1cGxpY2F0ZVRyYW5zaWVudDwvdGV4dD4NCjwvZz4NCjwhLS0gRXhlY3V0ZVViZXJncmFwaF9XQlBfVUlfSFVEX0F4aXNJbnB1dCAtLT4NCjxnIGlkPSJub2RlMiIgY2xhc3M9Im5vZGUiPg0KPHRpdGxlPkV4ZWN1dGVVYmVyZ3JhcGhfV0JQX1VJX0hVRF9BeGlzSW5wdXQ8L3RpdGxlPg0KPHBvbHlnb24gZmlsbD0iI2ZmODg4OCIgc3Ryb2tlPSJibGFjayIgcG9pbnRzPSI1MjguNjIsLTc5NC4zOCA1MjguNjIsLTg2NS4zOCA5OTguMzgsLTg2NS4zOCA5OTguMzgsLTc5NC4zOCA1MjguNjIsLTc5NC4zOCIvPg0KPHRleHQgdGV4dC1hbmNob3I9InN0YXJ0IiB4PSI1MzYuNjIiIHk9Ii04NDguMDgiIGZvbnQtZmFtaWx5PSJtb25vc3BhY2UiIGZvbnQtc2l6ZT0iMTQuMDAiPkZ1bmN0aW9uIEV4ZWN1dGVVYmVyZ3JhcGhfV0JQX1VJX0hVRF9BeGlzSW5wdXQ8L3RleHQ+DQo8dGV4dCB0ZXh0LWFuY2hvcj0ic3RhcnQiIHg9IjUzNi42MiIgeT0iLTgzMi4zMyIgZm9udC1mYW1pbHk9Im1vbm9zcGFjZSIgZm9udC1zaXplPSIxNC4wMCI+4pSc4pSQ4pSc4pSQSW50UHJvcGVydHkgRW50cnlQb2ludDwvdGV4dD4NCjx0ZXh0IHRleHQtYW5jaG9yPSJzdGFydCIgeD0iNTM2LjYyIiB5PSItODE2LjU4IiBmb250LWZhbWlseT0ibW9ub3NwYWNlIiBmb250LXNpemU9IjE0LjAwIj7ilJzilJDilJzilJDilJzilJDilJzilJBDUEZfQmx1ZXByaW50VmlzaWJsZXxDUEZfQmx1ZXByaW50UmVhZE9ubHl8Q1BGX1Bhcm08L3RleHQ+DQo8dGV4dCB0ZXh0LWFuY2hvcj0ic3RhcnQiIHg9IjUzNi42MiIgeT0iLTgwMC44MyIgZm9udC1mYW1pbHk9Im1vbm9zcGFjZSIgZm9udC1zaXplPSIxNC4wMCI+4pSc4pSQ4pSc4pSQQm9vbFByb3BlcnR5IEsyTm9kZV9FdmVudF9Jc0Rlc2lnblRpbWU8L3RleHQ+DQo8L2c+DQo8IS0tIEV4ZWN1dGVVYmVyZ3JhcGhfV0JQX1VJX0hVRF9BeGlzSW5wdXRfXzAgLS0+DQo8ZyBpZD0ibm9kZTMiIGNsYXNzPSJub2RlIj4NCjx0aXRsZT5FeGVjdXRlVWJlcmdyYXBoX1dCUF9VSV9IVURfQXhpc0lucHV0X18wPC90aXRsZT4NCjxwb2x5Z29uIGZpbGw9IiNlZWVlZWUiIHN0cm9rZT0iYmxhY2siIHBvaW50cz0iNDk1LjYyLC02MzcuNzUgNDk1LjYyLC03MDEgMTAzMS4zOCwtNzAxIDEwMzEuMzgsLTYzNy43NSA0OTUuNjIsLTYzNy43NSIvPg0KPHRleHQgdGV4dC1hbmNob3I9Im1pZGRsZSIgeD0iNzYzLjUiIHk9Ii02ODMuNyIgZm9udC1mYW1pbHk9Im1vbm9zcGFjZSIgZm9udC1zaXplPSIxNC4wMCI+V0JQX1VJX0hVRF9BeGlzSW5wdXRfQzo6RXhlY3V0ZVViZXJncmFwaF9XQlBfVUlfSFVEX0F4aXNJbnB1dDowPC90ZXh0Pg0KPHBvbHlsaW5lIGZpbGw9Im5vbmUiIHN0cm9rZT0iYmxhY2siIHBvaW50cz0iNDk1LjYyLC02NzcuMjUgMTAzMS4zOCwtNjc3LjI1Ii8+DQo8dGV4dCB0ZXh0LWFuY2hvcj0ic3RhcnQiIHg9IjUwMy42MiIgeT0iLTY1OS45NSIgZm9udC1mYW1pbHk9Im1vbm9zcGFjZSIgZm9udC1zaXplPSIxNC4wMCI+RVhfQ29tcHV0ZWRKdW1wPC90ZXh0Pg0KPHRleHQgdGV4dC1hbmNob3I9InN0YXJ0IiB4PSI1MDMuNjIiIHk9Ii02NDQuMiIgZm9udC1mYW1pbHk9Im1vbm9zcGFjZSIgZm9udC1zaXplPSIxNC4wMCI+4pSc4pSQ4pSc4pSQRVhfTG9jYWxWYXJpYWJsZSBbRW50cnlQb2ludF08L3RleHQ+DQo8L2c+DQo8IS0tIEV4ZWN1dGVVYmVyZ3JhcGhfV0JQX1VJX0hVRF9BeGlzSW5wdXQmIzQ1OyZndDtFeGVjdXRlVWJlcmdyYXBoX1dCUF9VSV9IVURfQXhpc0lucHV0X18wIC0tPg0KPGcgaWQ9ImVkZ2UxIiBjbGFzcz0iZWRnZSI+DQo8dGl0bGU+RXhlY3V0ZVViZXJncmFwaF9XQlBfVUlfSFVEX0F4aXNJbnB1dCYjNDU7Jmd0O0V4ZWN1dGVVYmVyZ3JhcGhfV0JQX1VJX0hVRF9BeGlzSW5wdXRfXzA8L3RpdGxlPg0KPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSJibGFjayIgZD0iTTc2My41LC03OTQuMDlDNzYzLjUsLTc3MC4wNyA3NjMuNSwtNzM3Ljk4IDc2My41LC03MTIuNTEiLz4NCjxwb2x5Z29uIGZpbGw9ImJsYWNrIiBzdHJva2U9ImJsYWNrIiBwb2ludHM9Ijc2NywtNzEyLjg0IDc2My41LC03MDIuODQgNzYwLC03MTIuODQgNzY3LC03MTIuODQiLz4NCjwvZz4NCjwhLS0gRXhlY3V0ZVViZXJncmFwaF9XQlBfVUlfSFVEX0F4aXNJbnB1dF9fMTAgLS0+DQo8ZyBpZD0ibm9kZTQiIGNsYXNzPSJub2RlIj4NCjx0aXRsZT5FeGVjdXRlVWJlcmdyYXBoX1dCUF9VSV9IVURfQXhpc0lucHV0X18xMDwvdGl0bGU+DQo8cG9seWdvbiBmaWxsPSIjZWVlZWVlIiBzdHJva2U9ImJsYWNrIiBwb2ludHM9IjE0MjcuNSwtMTg3LjI1IDE0MjcuNSwtMjUwLjUgMTk3MS41LC0yNTAuNSAxOTcxLjUsLTE4Ny4yNSAxNDI3LjUsLTE4Ny4yNSIvPg0KPHRleHQgdGV4dC1hbmNob3I9Im1pZGRsZSIgeD0iMTY5OS41IiB5PSItMjMzLjIiIGZvbnQtZmFtaWx5PSJtb25vc3BhY2UiIGZvbnQtc2l6ZT0iMTQuMDAiPldCUF9VSV9IVURfQXhpc0lucHV0X0M6OkV4ZWN1dGVVYmVyZ3JhcGhfV0JQX1VJX0hVRF9BeGlzSW5wdXQ6MTA8L3RleHQ+DQo8cG9seWxpbmUgZmlsbD0ibm9uZSIgc3Ryb2tlPSJibGFjayIgcG9pbnRzPSIxNDI3LjUsLTIyNi43NSAxOTcxLjUsLTIyNi43NSIvPg0KPHRleHQgdGV4dC1hbmNob3I9InN0YXJ0IiB4PSIxNDM1LjUiIHk9Ii0yMDkuNDUiIGZvbnQtZmFtaWx5PSJtb25vc3BhY2UiIGZvbnQtc2l6ZT0iMTQuMDAiPkVYX1ZpcnR1YWxGdW5jdGlvbiBTZXRWaXNpYmlsaXR5PC90ZXh0Pg0KPHRleHQgdGV4dC1hbmNob3I9InN0YXJ0IiB4PSIxNDM1LjUiIHk9Ii0xOTMuNyIgZm9udC1mYW1pbHk9Im1vbm9zcGFjZSIgZm9udC1zaXplPSIxNC4wMCI+4pSc4pSQ4pSc4pSQRVhfQnl0ZUNvbnN0IDE8L3RleHQ+DQo8L2c+DQo8IS0tIEV4ZWN1dGVVYmVyZ3JhcGhfV0JQX1VJX0hVRF9BeGlzSW5wdXRfXzI2IC0tPg0KPGcgaWQ9Im5vZGU1IiBjbGFzcz0ibm9kZSI+DQo8dGl0bGU+RXhlY3V0ZVViZXJncmFwaF9XQlBfVUlfSFVEX0F4aXNJbnB1dF9fMjY8L3RpdGxlPg0KPHBvbHlnb24gZmlsbD0iI2VlZWVlZSIgc3Ryb2tlPSJibGFjayIgcG9pbnRzPSIxNDMzLjUsLTEwMS43NSAxNDMzLjUsLTE0OS4yNSAxOTc3LjUsLTE0OS4yNSAxOTc3LjUsLTEwMS43NSAxNDMzLjUsLTEwMS43NSIvPg0KPHRleHQgdGV4dC1hbmNob3I9Im1pZGRsZSIgeD0iMTcwNS41IiB5PSItMTMxLjk1IiBmb250LWZhbWlseT0ibW9ub3NwYWNlIiBmb250LXNpemU9IjE0LjAwIj5XQlBfVUlfSFVEX0F4aXNJbnB1dF9DOjpFeGVjdXRlVWJlcmdyYXBoX1dCUF9VSV9IVURfQXhpc0lucHV0OjI2PC90ZXh0Pg0KPHBvbHlsaW5lIGZpbGw9Im5vbmUiIHN0cm9rZT0iYmxhY2siIHBvaW50cz0iMTQzMy41LC0xMjUuNSAxOTc3LjUsLTEyNS41Ii8+DQo8dGV4dCB0ZXh0LWFuY2hvcj0ic3RhcnQiIHg9IjE0NDEuNSIgeT0iLTEwOC4yIiBmb250LWZhbWlseT0ibW9ub3NwYWNlIiBmb250LXNpemU9IjE0LjAwIj5FWF9KdW1wIDUwPC90ZXh0Pg0KPC9nPg0KPCEtLSBFeGVjdXRlVWJlcmdyYXBoX1dCUF9VSV9IVURfQXhpc0lucHV0X18xMCYjNDU7Jmd0O0V4ZWN1dGVVYmVyZ3JhcGhfV0JQX1VJX0hVRF9BeGlzSW5wdXRfXzI2IC0tPg0KPGcgaWQ9ImVkZ2UyIiBjbGFzcz0iZWRnZSI+DQo8dGl0bGU+RXhlY3V0ZVViZXJncmFwaF9XQlBfVUlfSFVEX0F4aXNJbnB1dF9fMTAmIzQ1OyZndDtFeGVjdXRlVWJlcmdyYXBoX1dCUF9VSV9IVURfQXhpc0lucHV0X18yNjwvdGl0bGU+DQo8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9ImJsYWNrIiBkPSJNMTcwMS41MywtMTg2Ljk0QzE3MDIuMDgsLTE3OC41NCAxNzAyLjY4LC0xNjkuMzkgMTcwMy4yNSwtMTYwLjgyIi8+DQo8cG9seWdvbiBmaWxsPSJibGFjayIgc3Ryb2tlPSJibGFjayIgcG9pbnRzPSIxNzA2LjcyLC0xNjEuMzIgMTcwMy44OCwtMTUxLjExIDE2OTkuNzQsLTE2MC44NiAxNzA2LjcyLC0xNjEuMzIiLz4NCjwvZz4NCjwhLS0gRXhlY3V0ZVViZXJncmFwaF9XQlBfVUlfSFVEX0F4aXNJbnB1dF9fNTAgLS0+DQo8ZyBpZD0ibm9kZTgiIGNsYXNzPSJub2RlIj4NCjx0aXRsZT5FeGVjdXRlVWJlcmdyYXBoX1dCUF9VSV9IVURfQXhpc0lucHV0X181MDwvdGl0bGU+DQo8cG9seWdvbiBmaWxsPSIjZWVlZWVlIiBzdHJva2U9ImJsYWNrIiBwb2ludHM9IjE1ODUuNSwtMC41IDE1ODUuNSwtNjMuNzUgMjEyOS41LC02My43NSAyMTI5LjUsLTAuNSAxNTg1LjUsLTAuNSIvPg0KPHRleHQgdGV4dC1hbmNob3I9Im1pZGRsZSIgeD0iMTg1Ny41IiB5PSItNDYuNDUiIGZvbnQtZmFtaWx5PSJtb25vc3BhY2UiIGZvbnQtc2l6ZT0iMTQuMDAiPldCUF9VSV9IVURfQXhpc0lucHV0X0M6OkV4ZWN1dGVVYmVyZ3JhcGhfV0JQX1VJX0hVRF9BeGlzSW5wdXQ6NTA8L3RleHQ+DQo8cG9seWxpbmUgZmlsbD0ibm9uZSIgc3Ryb2tlPSJibGFjayIgcG9pbnRzPSIxNTg1LjUsLTQwIDIxMjkuNSwtNDAiLz4NCjx0ZXh0IHRleHQtYW5jaG9yPSJzdGFydCIgeD0iMTU5My41IiB5PSItMjIuNyIgZm9udC1mYW1pbHk9Im1vbm9zcGFjZSIgZm9udC1zaXplPSIxNC4wMCI+RVhfUmV0dXJuPC90ZXh0Pg0KPHRleHQgdGV4dC1hbmNob3I9InN0YXJ0IiB4PSIxNTkzLjUiIHk9Ii02Ljk1IiBmb250LWZhbWlseT0ibW9ub3NwYWNlIiBmb250LXNpemU9IjE0LjAwIj7ilJzilJDilJzilJBFWF9Ob3RoaW5nPC90ZXh0Pg0KPC9nPg0KPCEtLSBFeGVjdXRlVWJlcmdyYXBoX1dCUF9VSV9IVURfQXhpc0lucHV0X18yNiYjNDU7Jmd0O0V4ZWN1dGVVYmVyZ3JhcGhfV0JQX1VJX0hVRF9BeGlzSW5wdXRfXzUwIC0tPg0KPGcgaWQ9ImVkZ2UzIiBjbGFzcz0iZWRnZSI+DQo8dGl0bGU+RXhlY3V0ZVViZXJncmFwaF9XQlBfVUlfSFVEX0F4aXNJbnB1dF9fMjYmIzQ1OyZndDtFeGVjdXRlVWJlcmdyYXBoX1dCUF9VSV9IVURfQXhpc0lucHV0X181MDwvdGl0bGU+DQo8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9ImJsYWNrIiBkPSJNMTc0My44NiwtMTAxLjQ0QzE3NTkuNzQsLTkxLjkgMTc3OC41NSwtODAuNTkgMTc5Ni4yNSwtNjkuOTQiLz4NCjxwb2x5Z29uIGZpbGw9ImJsYWNrIiBzdHJva2U9ImJsYWNrIiBwb2ludHM9IjE3OTcuODgsLTczLjA1IDE4MDQuNjUsLTY0LjkgMTc5NC4yOCwtNjcuMDUgMTc5Ny44OCwtNzMuMDUiLz4NCjwvZz4NCjwhLS0gRXhlY3V0ZVViZXJncmFwaF9XQlBfVUlfSFVEX0F4aXNJbnB1dF9fMzEgLS0+DQo8ZyBpZD0ibm9kZTYiIGNsYXNzPSJub2RlIj4NCjx0aXRsZT5FeGVjdXRlVWJlcmdyYXBoX1dCUF9VSV9IVURfQXhpc0lucHV0X18zMTwvdGl0bGU+DQo8cG9seWdvbiBmaWxsPSIjZWVlZWVlIiBzdHJva2U9ImJsYWNrIiBwb2ludHM9IjE0NTUuNSwtMzg4Ljc1IDE0NTUuNSwtNDUyIDE5OTkuNSwtNDUyIDE5OTkuNSwtMzg4Ljc1IDE0NTUuNSwtMzg4Ljc1Ii8+DQo8dGV4dCB0ZXh0LWFuY2hvcj0ibWlkZGxlIiB4PSIxNzI3LjUiIHk9Ii00MzQuNyIgZm9udC1mYW1pbHk9Im1vbm9zcGFjZSIgZm9udC1zaXplPSIxNC4wMCI+V0JQX1VJX0hVRF9BeGlzSW5wdXRfQzo6RXhlY3V0ZVViZXJncmFwaF9XQlBfVUlfSFVEX0F4aXNJbnB1dDozMTwvdGV4dD4NCjxwb2x5bGluZSBmaWxsPSJub25lIiBzdHJva2U9ImJsYWNrIiBwb2ludHM9IjE0NTUuNSwtNDI4LjI1IDE5OTkuNSwtNDI4LjI1Ii8+DQo8dGV4dCB0ZXh0LWFuY2hvcj0ic3RhcnQiIHg9IjE0NjMuNSIgeT0iLTQxMC45NSIgZm9udC1mYW1pbHk9Im1vbm9zcGFjZSIgZm9udC1zaXplPSIxNC4wMCI+RVhfSnVtcElmTm90IDUwPC90ZXh0Pg0KPHRleHQgdGV4dC1hbmNob3I9InN0YXJ0IiB4PSIxNDYzLjUiIHk9Ii0zOTUuMiIgZm9udC1mYW1pbHk9Im1vbm9zcGFjZSIgZm9udC1zaXplPSIxNC4wMCI+4pSc4pSQ4pSc4pSQRVhfTG9jYWxWYXJpYWJsZSBbSzJOb2RlX0V2ZW50X0lzRGVzaWduVGltZV08L3RleHQ+DQo8L2c+DQo8IS0tIEV4ZWN1dGVVYmVyZ3JhcGhfV0JQX1VJX0hVRF9BeGlzSW5wdXRfXzQ1IC0tPg0KPGcgaWQ9Im5vZGU3IiBjbGFzcz0ibm9kZSI+DQo8dGl0bGU+RXhlY3V0ZVViZXJncmFwaF9XQlBfVUlfSFVEX0F4aXNJbnB1dF9fNDU8L3RpdGxlPg0KPHBvbHlnb24gZmlsbD0iI2VlZWVlZSIgc3Ryb2tlPSJibGFjayIgcG9pbnRzPSIxNDMzLjUsLTI4OC41IDE0MzMuNSwtMzM2IDE5NzcuNSwtMzM2IDE5NzcuNSwtMjg4LjUgMTQzMy41LC0yODguNSIvPg0KPHRleHQgdGV4dC1hbmNob3I9Im1pZGRsZSIgeD0iMTcwNS41IiB5PSItMzE4LjciIGZvbnQtZmFtaWx5PSJtb25vc3BhY2UiIGZvbnQtc2l6ZT0iMTQuMDAiPldCUF9VSV9IVURfQXhpc0lucHV0X0M6OkV4ZWN1dGVVYmVyZ3JhcGhfV0JQX1VJX0hVRF9BeGlzSW5wdXQ6NDU8L3RleHQ+DQo8cG9seWxpbmUgZmlsbD0ibm9uZSIgc3Ryb2tlPSJibGFjayIgcG9pbnRzPSIxNDMzLjUsLTMxMi4yNSAxOTc3LjUsLTMxMi4yNSIvPg0KPHRleHQgdGV4dC1hbmNob3I9InN0YXJ0IiB4PSIxNDQxLjUiIHk9Ii0yOTQuOTUiIGZvbnQtZmFtaWx5PSJtb25vc3BhY2UiIGZvbnQtc2l6ZT0iMTQuMDAiPkVYX0p1bXAgMTA8L3RleHQ+DQo8L2c+DQo8IS0tIEV4ZWN1dGVVYmVyZ3JhcGhfV0JQX1VJX0hVRF9BeGlzSW5wdXRfXzMxJiM0NTsmZ3Q7RXhlY3V0ZVViZXJncmFwaF9XQlBfVUlfSFVEX0F4aXNJbnB1dF9fNDUgLS0+DQo8ZyBpZD0iZWRnZTUiIGNsYXNzPSJlZGdlIj4NCjx0aXRsZT5FeGVjdXRlVWJlcmdyYXBoX1dCUF9VSV9IVURfQXhpc0lucHV0X18zMSYjNDU7Jmd0O0V4ZWN1dGVVYmVyZ3JhcGhfV0JQX1VJX0hVRF9BeGlzSW5wdXRfXzQ1PC90aXRsZT4NCjxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iYmxhY2siIGQ9Ik0xNzIxLjA4LC0zODguMzlDMTcxOC40MSwtMzc1LjUyIDE3MTUuMywtMzYwLjU0IDE3MTIuNTcsLTM0Ny4zNiIvPg0KPHBvbHlnb24gZmlsbD0iYmxhY2siIHN0cm9rZT0iYmxhY2siIHBvaW50cz0iMTcxNi4wNSwtMzQ2LjkgMTcxMC41OSwtMzM3LjgyIDE3MDkuMiwtMzQ4LjMyIDE3MTYuMDUsLTM0Ni45Ii8+DQo8dGV4dCB0ZXh0LWFuY2hvcj0ibWlkZGxlIiB4PSIxNzI1Ljc1IiB5PSItMzU2Ljk1IiBmb250LWZhbWlseT0ibW9ub3NwYWNlIiBmb250LXNpemU9IjE0LjAwIj5JRjwvdGV4dD4NCjwvZz4NCjwhLS0gRXhlY3V0ZVViZXJncmFwaF9XQlBfVUlfSFVEX0F4aXNJbnB1dF9fMzEmIzQ1OyZndDtFeGVjdXRlVWJlcmdyYXBoX1dCUF9VSV9IVURfQXhpc0lucHV0X181MCAtLT4NCjxnIGlkPSJlZGdlNCIgY2xhc3M9ImVkZ2UiPg0KPHRpdGxlPkV4ZWN1dGVVYmVyZ3JhcGhfV0JQX1VJX0hVRF9BeGlzSW5wdXRfXzMxOmUmIzQ1OyZndDtFeGVjdXRlVWJlcmdyYXBoX1dCUF9VSV9IVURfQXhpc0lucHV0X181MDwvdGl0bGU+DQo8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9InJlZCIgZD0iTTIwMDAuNSwtNDIwLjM4QzIwNDguMjEsLTQyMC4zOCAyMDA3LjUsLTM2MC45NiAyMDA3LjUsLTMxMy4yNSAyMDA3LjUsLTMxMy4yNSAyMDA3LjUsLTMxMy4yNSAyMDA3LjUsLTEyNC41IDIwMDcuNSwtMTAxLjA1IDE5OTMuOTYsLTgzLjQ0IDE5NzUuMDIsLTcwLjI4Ii8+DQo8cG9seWdvbiBmaWxsPSJub25lIiBzdHJva2U9InJlZCIgcG9pbnRzPSIxOTc2LjkyLC02Ny4zNSAxOTY2LjYsLTY0Ljk4IDE5NzMuMTksLTczLjI3IDE5NzYuOTIsLTY3LjM1Ii8+DQo8dGV4dCB0ZXh0LWFuY2hvcj0ibWlkZGxlIiB4PSIyMDMyLjI1IiB5PSItMjEzLjQ1IiBmb250LWZhbWlseT0ibW9ub3NwYWNlIiBmb250LXNpemU9IjE0LjAwIj5JRiBOT1Q8L3RleHQ+DQo8L2c+DQo8IS0tIEV4ZWN1dGVVYmVyZ3JhcGhfV0JQX1VJX0hVRF9BeGlzSW5wdXRfXzQ1JiM0NTsmZ3Q7RXhlY3V0ZVViZXJncmFwaF9XQlBfVUlfSFVEX0F4aXNJbnB1dF9fMTAgLS0+DQo8ZyBpZD0iZWRnZTYiIGNsYXNzPSJlZGdlIj4NCjx0aXRsZT5FeGVjdXRlVWJlcmdyYXBoX1dCUF9VSV9IVURfQXhpc0lucHV0X180NSYjNDU7Jmd0O0V4ZWN1dGVVYmVyZ3JhcGhfV0JQX1VJX0hVRF9BeGlzSW5wdXRfXzEwPC90aXRsZT4NCjxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iYmxhY2siIGQ9Ik0xNzAzLjk5LC0yODguMTlDMTcwMy40NiwtMjgwLjI0IDE3MDIuODYsLTI3MS4wNiAxNzAyLjI3LC0yNjIuMDYiLz4NCjxwb2x5Z29uIGZpbGw9ImJsYWNrIiBzdHJva2U9ImJsYWNrIiBwb2ludHM9IjE3MDUuNzgsLTI2Mi4xMyAxNzAxLjYzLC0yNTIuMzggMTY5OC44LC0yNjIuNTggMTcwNS43OCwtMjYyLjEzIi8+DQo8L2c+DQo8IS0tIEV4ZWN1dGVVYmVyZ3JhcGhfV0JQX1VJX0hVRF9BeGlzSW5wdXRfXzUyIC0tPg0KPGcgaWQ9Im5vZGU5IiBjbGFzcz0ibm9kZSI+DQo8dGl0bGU+RXhlY3V0ZVViZXJncmFwaF9XQlBfVUlfSFVEX0F4aXNJbnB1dF9fNTI8L3RpdGxlPg0KPHBvbHlnb24gZmlsbD0iI2VlZWVlZSIgc3Ryb2tlPSJibGFjayIgcG9pbnRzPSIxMjkzLjUsLTcyMCAxMjkzLjUsLTc2Ny41IDE4MzcuNSwtNzY3LjUgMTgzNy41LC03MjAgMTI5My41LC03MjAiLz4NCjx0ZXh0IHRleHQtYW5jaG9yPSJtaWRkbGUiIHg9IjE1NjUuNSIgeT0iLTc1MC4yIiBmb250LWZhbWlseT0ibW9ub3NwYWNlIiBmb250LXNpemU9IjE0LjAwIj5XQlBfVUlfSFVEX0F4aXNJbnB1dF9DOjpFeGVjdXRlVWJlcmdyYXBoX1dCUF9VSV9IVURfQXhpc0lucHV0OjUyPC90ZXh0Pg0KPHBvbHlsaW5lIGZpbGw9Im5vbmUiIHN0cm9rZT0iYmxhY2siIHBvaW50cz0iMTI5My41LC03NDMuNzUgMTgzNy41LC03NDMuNzUiLz4NCjx0ZXh0IHRleHQtYW5jaG9yPSJzdGFydCIgeD0iMTMwMS41IiB5PSItNzI2LjQ1IiBmb250LWZhbWlseT0ibW9ub3NwYWNlIiBmb250LXNpemU9IjE0LjAwIj5FWF9FbmRPZlNjcmlwdDwvdGV4dD4NCjwvZz4NCjwhLS0gUHJlQ29uc3RydWN0IC0tPg0KPGcgaWQ9Im5vZGUxMCIgY2xhc3M9Im5vZGUiPg0KPHRpdGxlPlByZUNvbnN0cnVjdDwvdGl0bGU+DQo8cG9seWdvbiBmaWxsPSIjZmY4ODg4IiBzdHJva2U9ImJsYWNrIiBwb2ludHM9IjEwNTMuNjIsLTgwMi4yNSAxMDUzLjYyLC04NTcuNSAxNTIzLjM4LC04NTcuNSAxNTIzLjM4LC04MDIuMjUgMTA1My42MiwtODAyLjI1Ii8+DQo8dGV4dCB0ZXh0LWFuY2hvcj0ic3RhcnQiIHg9IjEwNjEuNjIiIHk9Ii04NDAuMiIgZm9udC1mYW1pbHk9Im1vbm9zcGFjZSIgZm9udC1zaXplPSIxNC4wMCI+RnVuY3Rpb24gUHJlQ29uc3RydWN0PC90ZXh0Pg0KPHRleHQgdGV4dC1hbmNob3I9InN0YXJ0IiB4PSIxMDYxLjYyIiB5PSItODI0LjQ1IiBmb250LWZhbWlseT0ibW9ub3NwYWNlIiBmb250LXNpemU9IjE0LjAwIj7ilJzilJDilJzilJBCb29sUHJvcGVydHkgSXNEZXNpZ25UaW1lPC90ZXh0Pg0KPHRleHQgdGV4dC1hbmNob3I9InN0YXJ0IiB4PSIxMDYxLjYyIiB5PSItODA4LjciIGZvbnQtZmFtaWx5PSJtb25vc3BhY2UiIGZvbnQtc2l6ZT0iMTQuMDAiPuKUnOKUkOKUnOKUkOKUnOKUkOKUnOKUkENQRl9CbHVlcHJpbnRWaXNpYmxlfENQRl9CbHVlcHJpbnRSZWFkT25seXxDUEZfUGFybTwvdGV4dD4NCjwvZz4NCjwhLS0gUHJlQ29uc3RydWN0X18wIC0tPg0KPGcgaWQ9Im5vZGUxMSIgY2xhc3M9Im5vZGUiPg0KPHRpdGxlPlByZUNvbnN0cnVjdF9fMDwvdGl0bGU+DQo8cG9seWdvbiBmaWxsPSIjZWVlZWVlIiBzdHJva2U9ImJsYWNrIiBwb2ludHM9IjEwNDkuNSwtNjM3Ljc1IDEwNDkuNSwtNzAxIDE1MjcuNSwtNzAxIDE1MjcuNSwtNjM3Ljc1IDEwNDkuNSwtNjM3Ljc1Ii8+DQo8dGV4dCB0ZXh0LWFuY2hvcj0ibWlkZGxlIiB4PSIxMjg4LjUiIHk9Ii02ODMuNyIgZm9udC1mYW1pbHk9Im1vbm9zcGFjZSIgZm9udC1zaXplPSIxNC4wMCI+V0JQX1VJX0hVRF9BeGlzSW5wdXRfQzo6UHJlQ29uc3RydWN0OjA8L3RleHQ+DQo8cG9seWxpbmUgZmlsbD0ibm9uZSIgc3Ryb2tlPSJibGFjayIgcG9pbnRzPSIxMDQ5LjUsLTY3Ny4yNSAxNTI3LjUsLTY3Ny4yNSIvPg0KPHRleHQgdGV4dC1hbmNob3I9InN0YXJ0IiB4PSIxMDU3LjUiIHk9Ii02NTkuOTUiIGZvbnQtZmFtaWx5PSJtb25vc3BhY2UiIGZvbnQtc2l6ZT0iMTQuMDAiPkVYX0xldFZhbHVlT25QZXJzaXN0ZW50RnJhbWUgW0syTm9kZV9FdmVudF9Jc0Rlc2lnblRpbWVdPC90ZXh0Pg0KPHRleHQgdGV4dC1hbmNob3I9InN0YXJ0IiB4PSIxMDU3LjUiIHk9Ii02NDQuMiIgZm9udC1mYW1pbHk9Im1vbm9zcGFjZSIgZm9udC1zaXplPSIxNC4wMCI+4pSc4pSQ4pSc4pSQRVhfTG9jYWxWYXJpYWJsZSBbSXNEZXNpZ25UaW1lXTwvdGV4dD4NCjwvZz4NCjwhLS0gUHJlQ29uc3RydWN0JiM0NTsmZ3Q7UHJlQ29uc3RydWN0X18wIC0tPg0KPGcgaWQ9ImVkZ2U3IiBjbGFzcz0iZWRnZSI+DQo8dGl0bGU+UHJlQ29uc3RydWN0JiM0NTsmZ3Q7UHJlQ29uc3RydWN0X18wPC90aXRsZT4NCjxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iYmxhY2siIGQ9Ik0xMjg4LjUsLTgwMS45OUMxMjg4LjUsLTc3Ny41NCAxMjg4LjUsLTc0MS4wNCAxMjg4LjUsLTcxMi42OCIvPg0KPHBvbHlnb24gZmlsbD0iYmxhY2siIHN0cm9rZT0iYmxhY2siIHBvaW50cz0iMTI5MiwtNzEyLjk5IDEyODguNSwtNzAyLjk5IDEyODUsLTcxMi45OSAxMjkyLC03MTIuOTkiLz4NCjwvZz4NCjwhLS0gUHJlQ29uc3RydWN0X18xOCAtLT4NCjxnIGlkPSJub2RlMTIiIGNsYXNzPSJub2RlIj4NCjx0aXRsZT5QcmVDb25zdHJ1Y3RfXzE4PC90aXRsZT4NCjxwb2x5Z29uIGZpbGw9IiNlZWVlZWUiIHN0cm9rZT0iYmxhY2siIHBvaW50cz0iOTA5LjI1LC00ODkgOTA5LjI1LC01NTIuMjUgMTY2Ny43NSwtNTUyLjI1IDE2NjcuNzUsLTQ4OSA5MDkuMjUsLTQ4OSIvPg0KPHRleHQgdGV4dC1hbmNob3I9Im1pZGRsZSIgeD0iMTI4OC41IiB5PSItNTM0Ljk1IiBmb250LWZhbWlseT0ibW9ub3NwYWNlIiBmb250LXNpemU9IjE0LjAwIj5XQlBfVUlfSFVEX0F4aXNJbnB1dF9DOjpQcmVDb25zdHJ1Y3Q6MTg8L3RleHQ+DQo8cG9seWxpbmUgZmlsbD0ibm9uZSIgc3Ryb2tlPSJibGFjayIgcG9pbnRzPSI5MDkuMjUsLTUyOC41IDE2NjcuNzUsLTUyOC41Ii8+DQo8dGV4dCB0ZXh0LWFuY2hvcj0ic3RhcnQiIHg9IjkxNy4yNSIgeT0iLTUxMS4yIiBmb250LWZhbWlseT0ibW9ub3NwYWNlIiBmb250LXNpemU9IjE0LjAwIj5FWF9Mb2NhbEZpbmFsRnVuY3Rpb24gZXhwb3J0IFdCUF9VSV9IVURfQXhpc0lucHV0X0MmIzQ1OyZndDtFeGVjdXRlVWJlcmdyYXBoX1dCUF9VSV9IVURfQXhpc0lucHV0PC90ZXh0Pg0KPHRleHQgdGV4dC1hbmNob3I9InN0YXJ0IiB4PSI5MTcuMjUiIHk9Ii00OTUuNDUiIGZvbnQtZmFtaWx5PSJtb25vc3BhY2UiIGZvbnQtc2l6ZT0iMTQuMDAiPuKUnOKUkOKUnOKUkEVYX0ludENvbnN0IDMxPC90ZXh0Pg0KPC9nPg0KPCEtLSBQcmVDb25zdHJ1Y3RfXzAmIzQ1OyZndDtQcmVDb25zdHJ1Y3RfXzE4IC0tPg0KPGcgaWQ9ImVkZ2U4IiBjbGFzcz0iZWRnZSI+DQo8dGl0bGU+UHJlQ29uc3RydWN0X18wJiM0NTsmZ3Q7UHJlQ29uc3RydWN0X18xODwvdGl0bGU+DQo8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9ImJsYWNrIiBkPSJNMTI4OC41LC02MzcuMjVDMTI4OC41LC02MTUuOTUgMTI4OC41LC01ODcuNDMgMTI4OC41LC01NjQuMDUiLz4NCjxwb2x5Z29uIGZpbGw9ImJsYWNrIiBzdHJva2U9ImJsYWNrIiBwb2ludHM9IjEyOTIsLTU2NC4yMiAxMjg4LjUsLTU1NC4yMiAxMjg1LC01NjQuMjIgMTI5MiwtNTY0LjIyIi8+DQo8L2c+DQo8IS0tIFByZUNvbnN0cnVjdF9fMTgmIzQ1OyZndDtFeGVjdXRlVWJlcmdyYXBoX1dCUF9VSV9IVURfQXhpc0lucHV0X18zMSAtLT4NCjxnIGlkPSJlZGdlOSIgY2xhc3M9ImVkZ2UiPg0KPHRpdGxlPlByZUNvbnN0cnVjdF9fMTg6ZSYjNDU7Jmd0O0V4ZWN1dGVVYmVyZ3JhcGhfV0JQX1VJX0hVRF9BeGlzSW5wdXRfXzMxPC90aXRsZT4NCjxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0icmVkIiBkPSJNMTY2OC43NSwtNTIwLjYyQzE2OTcuMDgsLTUyMC42MiAxNzEyLjA0LC00OTAuMyAxNzE5Ljc2LC00NjMuMTgiLz4NCjxwb2x5Z29uIGZpbGw9Im5vbmUiIHN0cm9rZT0icmVkIiBwb2ludHM9IjE3MjMuMSwtNDY0LjI2IDE3MjIuMTgsLTQ1My43IDE3MTYuMzEsLTQ2Mi41MiAxNzIzLjEsLTQ2NC4yNiIvPg0KPC9nPg0KPCEtLSBQcmVDb25zdHJ1Y3RfXzMzIC0tPg0KPGcgaWQ9Im5vZGUxMyIgY2xhc3M9Im5vZGUiPg0KPHRpdGxlPlByZUNvbnN0cnVjdF9fMzM8L3RpdGxlPg0KPHBvbHlnb24gZmlsbD0iI2VlZWVlZSIgc3Ryb2tlPSJibGFjayIgcG9pbnRzPSIxMDk5LjYyLC0zODguNzUgMTA5OS42MiwtNDUyIDE0MzcuMzgsLTQ1MiAxNDM3LjM4LC0zODguNzUgMTA5OS42MiwtMzg4Ljc1Ii8+DQo8dGV4dCB0ZXh0LWFuY2hvcj0ibWlkZGxlIiB4PSIxMjY4LjUiIHk9Ii00MzQuNyIgZm9udC1mYW1pbHk9Im1vbm9zcGFjZSIgZm9udC1zaXplPSIxNC4wMCI+V0JQX1VJX0hVRF9BeGlzSW5wdXRfQzo6UHJlQ29uc3RydWN0OjMzPC90ZXh0Pg0KPHBvbHlsaW5lIGZpbGw9Im5vbmUiIHN0cm9rZT0iYmxhY2siIHBvaW50cz0iMTA5OS42MiwtNDI4LjI1IDE0MzcuMzgsLTQyOC4yNSIvPg0KPHRleHQgdGV4dC1hbmNob3I9InN0YXJ0IiB4PSIxMTA3LjYyIiB5PSItNDEwLjk1IiBmb250LWZhbWlseT0ibW9ub3NwYWNlIiBmb250LXNpemU9IjE0LjAwIj5FWF9SZXR1cm48L3RleHQ+DQo8dGV4dCB0ZXh0LWFuY2hvcj0ic3RhcnQiIHg9IjExMDcuNjIiIHk9Ii0zOTUuMiIgZm9udC1mYW1pbHk9Im1vbm9zcGFjZSIgZm9udC1zaXplPSIxNC4wMCI+4pSc4pSQ4pSc4pSQRVhfTm90aGluZzwvdGV4dD4NCjwvZz4NCjwhLS0gUHJlQ29uc3RydWN0X18xOCYjNDU7Jmd0O1ByZUNvbnN0cnVjdF9fMzMgLS0+DQo8ZyBpZD0iZWRnZTEwIiBjbGFzcz0iZWRnZSI+DQo8dGl0bGU+UHJlQ29uc3RydWN0X18xOCYjNDU7Jmd0O1ByZUNvbnN0cnVjdF9fMzM8L3RpdGxlPg0KPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSJibGFjayIgZD0iTTEyODIuMTcsLTQ4OC41NEMxMjgwLjU1LC00ODAuNTggMTI3OC43OCwtNDcxLjg4IDEyNzcuMDcsLTQ2My40NiIvPg0KPHBvbHlnb24gZmlsbD0iYmxhY2siIHN0cm9rZT0iYmxhY2siIHBvaW50cz0iMTI4MC41MSwtNDYyLjg0IDEyNzUuMDksLTQ1My43NCAxMjczLjY1LC00NjQuMjQgMTI4MC41MSwtNDYyLjg0Ii8+DQo8L2c+DQo8IS0tIFByZUNvbnN0cnVjdF9fMzUgLS0+DQo8ZyBpZD0ibm9kZTE0IiBjbGFzcz0ibm9kZSI+DQo8dGl0bGU+UHJlQ29uc3RydWN0X18zNTwvdGl0bGU+DQo8cG9seWdvbiBmaWxsPSIjZWVlZWVlIiBzdHJva2U9ImJsYWNrIiBwb2ludHM9IjEyOTMuNjIsLTU3MS4yNSAxMjkzLjYyLC02MTguNzUgMTYzMS4zOCwtNjE4Ljc1IDE2MzEuMzgsLTU3MS4yNSAxMjkzLjYyLC01NzEuMjUiLz4NCjx0ZXh0IHRleHQtYW5jaG9yPSJtaWRkbGUiIHg9IjE0NjIuNSIgeT0iLTYwMS40NSIgZm9udC1mYW1pbHk9Im1vbm9zcGFjZSIgZm9udC1zaXplPSIxNC4wMCI+V0JQX1VJX0hVRF9BeGlzSW5wdXRfQzo6UHJlQ29uc3RydWN0OjM1PC90ZXh0Pg0KPHBvbHlsaW5lIGZpbGw9Im5vbmUiIHN0cm9rZT0iYmxhY2siIHBvaW50cz0iMTI5My42MiwtNTk1IDE2MzEuMzgsLTU5NSIvPg0KPHRleHQgdGV4dC1hbmNob3I9InN0YXJ0IiB4PSIxMzAxLjYyIiB5PSItNTc3LjciIGZvbnQtZmFtaWx5PSJtb25vc3BhY2UiIGZvbnQtc2l6ZT0iMTQuMDAiPkVYX0VuZE9mU2NyaXB0PC90ZXh0Pg0KPC9nPg0KPC9nPg0KPC9zdmc+DQo="), m => m.codePointAt(0)));
      container.innerHTML = data.substring(data.indexOf("<svg"));
      const map = container.children[0];
      minimap.src = URL.createObjectURL(new Blob([data], {'type':'image/svg+xml'}));

      function setScale(s) {
        map.style.scale = s;
        map.style.transformOrigin = '0 0';
        const bounds = map.getBoundingClientRect();
        container.style.width = bounds.width + 'px';
        container.style.height = bounds.height + 'px';
        update();
      }

      function zoom(amount, pointX, pointY) {
        const currentScale = +map.style.scale;
        const newScale = currentScale * amount;

        const currentScrollX = window.scrollX;
        const currentScrollY = window.scrollY;

        map.style.scale = newScale;
        const bounds = map.getBoundingClientRect();
        container.style.width = bounds.width + 'px';
        container.style.height = bounds.height + 'px';

        window.scrollTo(pointX * amount - (pointX - currentScrollX), pointY * amount - (pointY - currentScrollY));
        update();
      }
      function scroll(dx, dy) {
        window.scrollBy(dx, dy);
        update();
      }
      function handleMove(e) {
        if (!drag) return;
        if (drag === minimapContainer) {
          const bounds = minimap.getBoundingClientRect();

          scroll(
            document.documentElement.scrollWidth * e.movementX / bounds.width,
            document.documentElement.scrollHeight * e.movementY / bounds.height
          );
        } else {
          scroll(-e.movementX, -e.movementY);
        }
        e.preventDefault();
      }

      let debounceTimeout = null;
      function update() {
        minimapView.style.top = document.documentElement.scrollTop / document.documentElement.scrollHeight * 100 + '%';
        minimapView.style.left = document.documentElement.scrollLeft / document.documentElement.scrollWidth * 100 + '%';
        minimapView.style.width = document.documentElement.clientWidth / document.documentElement.scrollWidth * 100 + '%';
        minimapView.style.height = document.documentElement.clientHeight / document.documentElement.scrollHeight * 100 + '%';
      }

      let drag = false;

      function init() {
        setScale(1);
        const bounds = map.getBoundingClientRect();
        const scaleW = document.documentElement.clientWidth / bounds.width;
        const scaleH = document.documentElement.clientHeight / bounds.height;
        const maxAspectRatio = 0.2;
        const scale = Math.min(Math.max(maxAspectRatio, scaleW / scaleH) * scaleH, Math.max(maxAspectRatio, scaleH / scaleW) * scaleW);
        setScale(Math.min(scale, 1));
      }

      window.addEventListener('wheel', e => {
        e.preventDefault();
        zoom(e.deltaY > 0 ? (1 / 1.1) : 1.1, e.pageX, e.pageY);
      }, {passive: false});

      window.addEventListener('mousedown', e => {
        if (e.target && e.target.tagName === 'text') return;
        if (!(e.buttons & 1)) return;
        if (drag) return;
        drag = e.target || true;
      }, {passive: true});

      window.addEventListener('mouseup', e => {
        if (e.buttons & 1) return;
        drag = false;
      }, {passive: true});

      window.addEventListener('mousemove', e => {
        handleMove(e);
      }, {passive: false});

      window.addEventListener('scroll', () => {
        update();
      }, {passive: true});

      minimapContainer.addEventListener('mousedown', e => {
        e.preventDefault();
      }, {passive: false});

      window.addEventListener('hashchange', () => {
        load();
      }, {passive: true});

      init();
    </script>
  </body>
</html>

